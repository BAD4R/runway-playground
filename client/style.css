/* Modern chat layout inspired by ChatGPT */
:root{
  --sidebar-bg:#f7f7f8;
  --sidebar-border:#e5e5e7;
  --accent:#d946ef;
  --accent-bg:rgba(217,70,239,0.15);
}

html,body{
  height:100%;
  margin:0;
  font-family:system-ui,sans-serif;
  color:#1e1e1e;
}

.app{display:flex;height:calc(100vh - 40px);background:#fff;}
.service-header{height:40px;}

/* service header */
.service-header{display:flex;align-items:center;padding:8px 12px;border-bottom:1px solid var(--sidebar-border);position:relative;}
.service-current{display:flex;align-items:center;gap:4px;cursor:pointer;}
.service-current img{height:24px;}
.service-current .arrow{width:16px;height:16px;filter:brightness(0) invert(.2);}

.popup a{display:flex;align-items:center;gap:8px;padding:8px 12px;color:inherit;text-decoration:none;}
.popup a:hover{background:#f7f7f8;}
.popup a img{width:16px;height:16px;filter:brightness(0) invert(.2);}
.service-header .popup a{padding:4px;}
.service-header .popup a img{width:120px;height:auto;filter:none;}

/* ----- Sidebar ----- */
.sidebar{width:260px;display:flex;flex-direction:column;background:var(--sidebar-bg);border-right:1px solid var(--sidebar-border);}

.sidebar-top{padding:12px;border-bottom:1px solid var(--sidebar-border);}

.new-chat{width:100%;display:flex;align-items:center;gap:8px;background:#fff;border:1px solid var(--sidebar-border);border-radius:8px;padding:8px 12px;font-size:14px;cursor:pointer;}
.new-chat img{width:16px;height:16px;filter:brightness(0) invert(.2);}

.chat-list{flex:1;overflow-y:auto;list-style:none;margin:0;padding:8px;}
.chat-list li{position:relative;display:flex;align-items:center;justify-content:space-between;padding:6px 8px;border-radius:6px;cursor:pointer;}
.chat-list li.active{background:rgba(0,0,0,0.05);border-left:4px solid var(--accent);}
.chat-list li:hover{background:#ececf1;}

.menu-btn{background:none;border:none;opacity:0;padding:4px;cursor:pointer;}
.chat-list li:hover .menu-btn{opacity:1;}
.menu-btn img{width:16px;height:16px;filter:brightness(0) invert(.2);}

.chat-menu{position:absolute;right:0;top:28px;background:#fff;border:1px solid var(--sidebar-border);border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);display:flex;flex-direction:column;z-index:10;}
.chat-menu button{background:none;border:none;padding:8px 12px;text-align:left;display:flex;align-items:center;gap:8px;font-size:14px;cursor:pointer;}
.chat-menu button img{width:16px;height:16px;filter:brightness(0) invert(.2);}
.chat-menu button:hover{background:#f7f7f8;}
.chat-menu .danger{color:#c00;}

.sidebar-bottom{padding:12px;border-top:1px solid var(--sidebar-border);display:flex;flex-direction:column;gap:8px;}
.sidebar-bottom input{padding:6px 8px;border:1px solid var(--sidebar-border);border-radius:6px;}
.sidebar-bottom button{padding:6px 8px;border:1px solid var(--sidebar-border);border-radius:6px;background:#fff;cursor:pointer;}

/* ----- Main ----- */
.main{flex:1;display:flex;flex-direction:column;}

.topbar{padding:12px;border-bottom:1px solid var(--sidebar-border);display:flex;align-items:center;gap:8px;}
.balance{margin-left:auto;font-size:14px;color:#555;}

.messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px;}

.message{max-width:80%;padding:8px 12px;border-radius:12px;line-height:1.4;animation:fadeIn .2s ease;}
.message.user{align-self:flex-end;background:var(--accent-bg);color:#222;}
.message.assistant{align-self:flex-start;background:#f2f2f2;}

/* ----- Composer ----- */
.composer{padding:12px;border-top:1px solid var(--sidebar-border);display:flex;align-items:center;gap:8px;}

.prompt-box{flex:1;display:flex;align-items:center;gap:8px;border:1px solid var(--sidebar-border);border-radius:8px;padding:4px 8px;}
.prompt-box textarea{flex:1;border:none;outline:none;resize:none;font-family:inherit;font-size:14px;padding:6px 0;background:transparent;}

.icon-btn{background:none;border:none;cursor:pointer;padding:4px;display:flex;align-items:center;}
.icon-btn img{width:20px;height:20px;filter:brightness(0) invert(.2);}

.send-btn{background:var(--accent);border:none;border-radius:50%;padding:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;}
.send-btn img{width:20px;height:20px;filter:invert(1);}

.estimate{font-size:12px;color:#555;}

.linklike{background:none;border:none;color:#06c;cursor:pointer;padding:0;}

@keyframes fadeIn{from{opacity:0;transform:translateY(4px);}to{opacity:1;transform:translateY(0);}}

/* popup menus */
.popup{position:absolute;background:#fff;border:1px solid var(--sidebar-border);border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);padding:4px;display:flex;flex-direction:column;gap:4px;z-index:100;animation:fadeIn .15s ease;}
.popup button{background:none;border:none;padding:8px 12px;text-align:left;display:flex;align-items:center;gap:8px;font-size:14px;cursor:pointer;}
.popup button:hover{background:#f7f7f8;}
.popup.hidden{display:none;}

.hidden{display:none;}

/* attachment slots */
.attach-slot{width:120px;height:80px;border:2px dashed var(--sidebar-border);border-radius:8px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;}
.attach-slot img{width:100%;height:100%;object-fit:cover;}
.attach-slot button.remove{position:absolute;top:2px;right:2px;background:#fff;border:none;border-radius:50%;width:16px;height:16px;cursor:pointer;}
.drop-zone{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#999;font-size:24px;cursor:pointer;}
.drop-zone.dragover{color:var(--accent);}

.attach-preview{display:flex;gap:4px;margin-left:4px;}
.attach-preview .thumb{position:relative;}
.attach-preview img{width:32px;height:32px;object-fit:cover;border-radius:4px;}
.attach-preview .thumb button{position:absolute;top:-4px;right:-4px;border:none;background:#fff;border-radius:50%;width:12px;height:12px;cursor:pointer;}

/* Attachment preview */

/* message attachments */
.message .attachment{width:120px;height:80px;object-fit:cover;border-radius:6px;margin-top:4px;}

.model-desc{text-align:center;color:#888;margin-top:40px;}
.coming-soon{display:flex;align-items:center;justify-content:center;height:calc(100vh - 40px);font-size:24px;color:#555;}
